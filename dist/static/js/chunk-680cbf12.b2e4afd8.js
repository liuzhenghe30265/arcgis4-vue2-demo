(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-680cbf12"],{"03a0":function(e,r,t){"use strict";t("838b")},"2ffe":function(e,r,t){"use strict";t.r(r);var i=function(){var e=this,r=e._self._c;return r("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"map-container"}},[r("div",{staticStyle:{position:"absolute",right:"50px",top:"50px","z-index":"999",width:"200px"}},[r("el-tree",{ref:"tree2",attrs:{data:e.treeData2,"show-checkbox":"","node-key":"id","highlight-current":""},on:{"check-change":e.handleCheckChange2}}),r("hr"),r("el-tree",{ref:"tree",attrs:{data:e.treeData,props:e.defaultProps,"show-checkbox":"","node-key":"id","highlight-current":""},on:{"check-change":e.handleCheckChange}})],1)])},s=[],a=t("afaa"),n=t.n(a),o={name:"MapServer",data(){return{SF311Layer:null,DamageAssessmentLayer:null,haveSublayers:null,defaultProps:{children:"children",label:"label"},treeData2:[{label:"SF311",id:"SF311"},{label:"DamageAssessment",id:"DamageAssessment"}],treeData:[{label:"Cities",id:0},{label:"Highways",id:1},{label:"States",id:2},{label:"Counties",id:3}],map:"",MapView:"",gisConstructor:{},gisModules:["esri/Map","esri/views/MapView","esri/Graphic","esri/symbols/TextSymbol","esri/layers/GraphicsLayer","esri/geometry/Point","esri/geometry/SpatialReference","esri/layers/MapImageLayer","esri/layers/FeatureLayer","esri/widgets/Feature","esri/layers/TileLayer","esri/Basemap","esri/WebMap"]}},mounted(){this.init()},methods:{handleCheckChange2(){let e=this.$refs.tree2.getCheckedKeys();this.SF311Layer.visible=!1,this.DamageAssessmentLayer.visible=!1,e.indexOf("SF311")>-1&&(this.SF311Layer.visible=!0),e.indexOf("DamageAssessment")>-1&&(this.DamageAssessmentLayer.visible=!0)},handleCheckChange(){let e=this.$refs.tree.getCheckedKeys(),r=this.haveSublayers.allSublayers.items;r.forEach(e=>{e.visible=!1}),e.forEach(e=>{r[e].visible=!0})},mapClickFun(){this.MapView.on("click",e=>{console.log(e)})},loadLayersFun(){this.SF311Layer=new this.gisConstructor.MapImageLayer({url:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/SF311/MapServer",layerId:"SF311",visible:!1}),this.map.add(this.SF311Layer,2),this.DamageAssessmentLayer=new this.gisConstructor.MapImageLayer({url:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/DamageAssessment/MapServer",layerId:"DamageAssessment",visible:!1}),this.map.add(this.DamageAssessmentLayer,-1),this.haveSublayers=new this.gisConstructor.MapImageLayer({url:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer",layerId:2,sublayers:[{id:0,visible:!1},{id:1,visible:!1},{id:2,visible:!1},{id:3,visible:!1}]}),this.map.add(this.haveSublayers)},init(){n.a.loadCss("https://js.arcgis.com/4.16/esri/themes/light/main.css"),n.a.loadScript({url:"https://js.arcgis.com/4.16/init.js",dojoConfig:{async:!1}}),Object(a["loadModules"])(this.gisModules).then(this.initMap).then(this.loadLayersFun).then(this.mapClickFun)},initMap(e){for(let r in e){let t=this.gisModules[r].split("/").pop();this.gisConstructor[t]=e[r]}this.map=new this.gisConstructor.Map({basemap:"hybrid"}),this.MapView=new this.gisConstructor.MapView({container:"map-container",map:this.map,center:[-99,39],zoom:3})}}},l=o,c=(t("03a0"),t("2877")),d=Object(c["a"])(l,i,s,!1,null,null,null);r["default"]=d.exports},"838b":function(e,r,t){},afaa:function(e,r,t){(function(e,t){t(r)})(0,(function(e){"use strict";var r="4.17",t="next";function i(e){if(e.toLowerCase()===t)return t;var r=e&&e.match(/^(\d)\.(\d+)/);return r&&{major:parseInt(r[1],10),minor:parseInt(r[2],10)}}function s(e){return void 0===e&&(e=r),"https://js.arcgis.com/"+e+"/"}function a(e){void 0===e&&(e=r);var a=s(e),n=i(e);if(n!==t&&3===n.major){var o=n.minor<=10?"js/":"";return""+a+o+"esri/css/esri.css"}return a+"esri/themes/light/main.css"}function n(e){var r=document.createElement("link");return r.rel="stylesheet",r.href=e,r}function o(e,r){if(r){var t=document.querySelector(r);t.parentNode.insertBefore(e,t)}else document.head.appendChild(e)}function l(e){return document.querySelector('link[href*="'+e+'"]')}function c(e){return!e||i(e)?a(e):e}function d(e,r){var t=c(e),i=l(t);return i||(i=n(t),o(i,r)),i}var u="undefined"!==typeof window,h={Promise:u?window["Promise"]:void 0},p={};function m(e){var r=document.createElement("script");return r.type="text/javascript",r.src=e,r.setAttribute("data-esri-loader","loading"),r}function f(e,r,t){var i;t&&(i=v(e,t));var s=function(){r(e),e.removeEventListener("load",s,!1),i&&e.removeEventListener("error",i,!1)};e.addEventListener("load",s,!1)}function v(e,r){var t=function(i){r(i.error||new Error("There was an error attempting to load "+e.src)),e.removeEventListener("error",t,!1)};return e.addEventListener("error",t,!1),t}function g(e){void 0===e&&(e={}),p=e}function y(){return document.querySelector("script[data-esri-loader]")}function b(){var e=window["require"];return e&&e.on}function w(e){void 0===e&&(e={});var r={};[p,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}));var t=r.version,i=r.url||s(t);return new h.Promise((function(e,s){var a=y();if(a){var n=a.getAttribute("src");n!==i?s(new Error("The ArcGIS API for JavaScript is already loaded ("+n+").")):b()?e(a):f(a,e,s)}else if(b())s(new Error("The ArcGIS API for JavaScript is already loaded."));else{var o=r.css;if(o){var l=!0===o;d(l?t:o,r.insertCssBefore)}r.dojoConfig&&(window["dojoConfig"]=r.dojoConfig),a=m(i),f(a,(function(){a.setAttribute("data-esri-loader","loaded"),e(a)}),s),document.body.appendChild(a)}}))}function S(e){return new h.Promise((function(r,t){var i=window["require"].on("error",t);window["require"](e,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.remove(),r(e)}))}))}function C(e,r){if(void 0===r&&(r={}),b())return S(e);var t=y(),i=t&&t.getAttribute("src");return!r.url&&i&&(r.url=i),w(r).then((function(){return S(e)}))}var L={getScript:y,isLoaded:b,loadModules:C,loadScript:w,loadCss:d,setDefaultOptions:g,utils:h};e.getScript=y,e.isLoaded=b,e.loadModules=C,e.loadScript=w,e.loadCss=d,e.setDefaultOptions=g,e.utils=h,e["default"]=L,Object.defineProperty(e,"__esModule",{value:!0})}))}}]);